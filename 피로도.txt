def permutation(k, arr, length, visit, cnt, depth):
    result = []
    if depth == length:
        return [cnt]
    for i in range(length):
        if not visit[i]:
            if k < arr[i][0]:
                result += [cnt]
            else:
                visit[i] = True
                result += permutation(k-arr[i][1], arr, length, visit, cnt+[i], depth+1)
                visit[i] = False
            
    return result
def solution(k, dungeons):
    visit = [False]*len(dungeons)
    result = permutation(k, dungeons, len(dungeons), visit, [], 0)
    return max([len(i) for i in result])